# MethArCT - äº§ç”²çƒ·å¤èŒåŸ¹å…»ç»„å­¦å·¥å…·åŒ…

## MethArCT

## ç®€ä»‹

MethArCT (Methanogenic Archaeal Culturomics Toolkit) æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºäº§ç”²çƒ·å¤èŒåŸ¹å…»ç»„å­¦åˆ†æçš„ç»¼åˆå·¥å…·åŒ…ã€‚è¯¥å·¥å…·é›†æˆäº†å¤šç§ç”Ÿç‰©ä¿¡æ¯å­¦åˆ†æåŠŸèƒ½ï¼Œèƒ½å¤Ÿé¢„æµ‹å¾®ç”Ÿç‰©çš„ä»£è°¢é€šè·¯ã€è€ç›æ€§ã€æœ€é€‚ç”Ÿé•¿æ¸©åº¦å’Œå¯åŸ¹å…»æ€§ã€‚

## ä¸»è¦åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¿…éœ€ï¼‰
- **ä»£è°¢é€šè·¯é¢„æµ‹**: ç”²çƒ·ã€ç¡«ã€æ°®ä»£è°¢é€”å¾„åˆ†æï¼ˆ21ç§é€šè·¯ï¼‰- åŸºäºDiamondå·¥å…·
- **è€ç›æ€§è¯„ä¼°**: åŸºäºåŸºå› æ•°æ®åº“çš„ç›è€å—æ€§é¢„æµ‹
- **å¯åŸ¹å…»æ€§è¯„ä¼°**: åŸºäºä»£è°¢é€šè·¯çš„åŸ¹å…»éš¾åº¦è¯„ä¼°

### æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
- **æ¸©åº¦é¢„æµ‹**: æœ€é€‚ç”Ÿé•¿æ¸©åº¦(OGT)é¢„æµ‹ - éœ€è¦å®‰è£…Tomeå·¥å…·
- **åŸºå› ç»„è´¨é‡è¯„ä¼°**: åŸºäºCheckM2çš„åŸºå› ç»„å®Œæ•´æ€§å’Œæ±¡æŸ“è¯„ä¼° - éœ€è¦å®‰è£…CheckM2å·¥å…·

## ç³»ç»Ÿè¦æ±‚

### åŸºæœ¬è¦æ±‚
- **Python**: 3.8+
- **å¿…éœ€å·¥å…·**: Diamond
- **æ“ä½œç³»ç»Ÿ**: Windows, Linux, macOS

### å¯é€‰å·¥å…·
- **Tome**: ç”¨äºæœ€é€‚ç”Ÿé•¿æ¸©åº¦é¢„æµ‹ï¼ˆå¯é€‰ï¼‰
- **CheckM2**: ç”¨äºåŸºå› ç»„è´¨é‡è¯„ä¼°ï¼ˆå¯é€‰ï¼‰

## å¿«é€Ÿå®‰è£…æŒ‡å—

### æ­¥éª¤1: è·å–é¡¹ç›®
```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone https://github.com/your-username/MethArCT.git
cd MethArCT
```

### æ­¥éª¤2: åˆ›å»ºPythonç¯å¢ƒ
```bash
# ä½¿ç”¨condaåˆ›å»ºç¯å¢ƒï¼ˆæ¨èï¼‰
conda env create -f environment.yml
conda activate metharct

# æˆ–ä½¿ç”¨pipåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv metharct_env
# Windowsæ¿€æ´»:
metharct_env\Scripts\activate
# Linux/macOSæ¿€æ´»:
source metharct_env/bin/activate
```

### æ­¥éª¤3: å®‰è£…æ ¸å¿ƒä¾èµ–
```bash
# å®‰è£…Pythonä¾èµ–åŒ…
pip install -r requirements.txt

# å®‰è£…é¡¹ç›®ä¸ºå¯æ‰§è¡Œå‘½ä»¤
pip install -e .

# å®‰è£…å¿…éœ€çš„Diamondå·¥å…·
conda install -c bioconda diamond
```

### æ­¥éª¤4: éªŒè¯å®‰è£…
```bash
# æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
python quick_test.py

# æ£€æŸ¥å‘½ä»¤è¡Œå·¥å…·
metharct --help
```

## å¯é€‰å·¥å…·å®‰è£…ï¼ˆæ‰©å±•åŠŸèƒ½ï¼‰

å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨æ¸©åº¦é¢„æµ‹æˆ–åŸºå› ç»„è´¨é‡è¯„ä¼°åŠŸèƒ½ï¼Œå¯ä»¥å®‰è£…ä»¥ä¸‹å¯é€‰å·¥å…·ï¼š

### Tomeå·¥å…·å®‰è£…ï¼ˆæ¸©åº¦é¢„æµ‹ï¼‰
```bash
# åœ¨condaç¯å¢ƒä¸­å®‰è£…
conda install -c bioconda tome

# éªŒè¯å®‰è£…
tome --help
```

### CheckM2å·¥å…·å®‰è£…ï¼ˆåŸºå› ç»„è´¨é‡è¯„ä¼°ï¼‰
```bash
# åœ¨condaç¯å¢ƒä¸­å®‰è£…
conda install -c bioconda checkm2

# éªŒè¯å®‰è£…
checkm2 --help
```

### Windowsç”¨æˆ·ç‰¹åˆ«è¯´æ˜

**é‡è¦æç¤º**: å¯¹äºWindowsç”¨æˆ·ï¼Œå¦‚æœåœ¨å®‰è£…Tomeå’ŒCheckM2æ—¶é‡åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨WSL (Windows Subsystem for Linux) ç¯å¢ƒï¼š

1. **å®‰è£…WSL2**:
   - åœ¨PowerShellä¸­è¿è¡Œ: `wsl --install`
   - é‡å¯è®¡ç®—æœº

2. **åœ¨WSLä¸­å®‰è£…å·¥å…·**:
   ```bash
   # è¿›å…¥WSLç¯å¢ƒ
   wsl
   
   # å®‰è£…condaï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
   wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
   bash Miniconda3-latest-Linux-x86_64.sh
   
   # åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…å·¥å…·
   conda create -n bioinfo python=3.8
   conda activate bioinfo
   conda install -c bioconda diamond tome checkm2
   ```

3. **é…ç½®é¡¹ç›®ä½¿ç”¨WSL**:
   - å‚è€ƒé¡¹ç›®ä¸­çš„ `example_wsl_usage.py` æ–‡ä»¶
   - æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šWSLè·¯å¾„

## è¯¦ç»†ä½¿ç”¨æŒ‡å—

### 1. åŸºæœ¬ä½¿ç”¨æ–¹æ³•

#### 1.1 å‘½ä»¤è¡Œä½¿ç”¨ï¼ˆæ¨èï¼‰

**æ ¸å¿ƒåˆ†æï¼ˆä»…ä½¿ç”¨Diamondï¼‰**:
```bash
# ä»£è°¢é€šè·¯åˆ†æ - è¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œæ— éœ€é¢å¤–å·¥å…·
metharct diamond "protein(1).faa" -o results/

# ç»¼åˆåˆ†æï¼ˆè·³è¿‡å¯é€‰å·¥å…·ï¼‰
metharct comprehensive "protein(1).faa" -o results/ --skip-tome --skip-checkm2
```

**å®Œæ•´åˆ†æï¼ˆéœ€è¦å®‰è£…å¯é€‰å·¥å…·ï¼‰**:
```bash
# åŒ…å«æ‰€æœ‰åŠŸèƒ½çš„ç»¼åˆåˆ†æ
metharct comprehensive "protein(1).faa" -o results/

# å•ç‹¬è¿è¡Œå¯é€‰åˆ†æ
metharct tome "protein(1).faa" -o results/        # éœ€è¦Tome
metharct checkm2 "genome.fasta" -o results/      # éœ€è¦CheckM2
```

#### 1.2 Pythonè„šæœ¬ä½¿ç”¨
```python
from metharct import MethArCTAnalyzer

# åˆ›å»ºåˆ†æå™¨å®ä¾‹
analyzer = MethArCTAnalyzer()

# ä»…ä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½ï¼ˆDiamondåˆ†æï¼‰
results = analyzer.analyze_diamond('protein_sequences.faa')

# å®Œæ•´åˆ†æï¼ˆå¦‚æœå®‰è£…äº†å¯é€‰å·¥å…·ï¼‰
results = analyzer.comprehensive_analysis('protein_sequences.faa')

print(results)
```

### 2. è¾“å…¥æ–‡ä»¶è¦æ±‚

#### 2.1 æ–‡ä»¶æ ¼å¼
- **æ”¯æŒæ ¼å¼**: FASTAæ ¼å¼ (.fa, .fasta, .faa)
- **æ–‡ä»¶å¤§å°**: å»ºè®®ä¸è¶…è¿‡50MB
- **å­—ç¬¦ç¼–ç **: UTF-8

#### 2.2 åºåˆ—ç±»å‹
- **è›‹ç™½è´¨åºåˆ—**: ç”¨äºDiamondä»£è°¢é€šè·¯åˆ†æå’ŒTomeæ¸©åº¦é¢„æµ‹
- **åŸºå› ç»„åºåˆ—**: ç”¨äºCheckM2åŸºå› ç»„è´¨é‡è¯„ä¼°

#### 2.3 æ–‡ä»¶åæ³¨æ„äº‹é¡¹
- å¦‚æœæ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚æ‹¬å·ã€ç©ºæ ¼ï¼‰ï¼Œè¯·ç”¨å¼•å·åŒ…å›´
- ç¤ºä¾‹: `"protein(1).faa"` è€Œä¸æ˜¯ `protein(1).faa`

### 3. æµ‹è¯•å®‰è£…

#### 3.1 å¿«é€Ÿæµ‹è¯•
```bash
# æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
python quick_test.py

# æ£€æŸ¥å‘½ä»¤è¡Œå·¥å…·
metharct --help
```

#### 3.2 ä½¿ç”¨ç¤ºä¾‹æ–‡ä»¶æµ‹è¯•
```bash
# ä½¿ç”¨é¡¹ç›®æä¾›çš„ç¤ºä¾‹æ–‡ä»¶è¿›è¡Œæµ‹è¯•
metharct diamond "protein(1).faa" -o test_results/

# å¦‚æœå®‰è£…äº†å¯é€‰å·¥å…·ï¼Œå¯ä»¥è¿è¡Œå®Œæ•´æµ‹è¯•
metharct comprehensive "protein(1).faa" -o test_results/
```

### 4. è¾“å‡ºç»“æœè¯´æ˜

#### 4.1 æ ¸å¿ƒåŠŸèƒ½è¾“å‡ºï¼ˆDiamondåˆ†æï¼‰
åˆ†æå®Œæˆåï¼Œåœ¨æŒ‡å®šçš„è¾“å‡ºç›®å½•ä¸­ä¼šç”Ÿæˆï¼š

- **ä»£è°¢é€šè·¯åˆ†æç»“æœ**:
  - `[æ–‡ä»¶å]_diamond_summary.csv` - ä»£è°¢é€šè·¯æ±‡æ€»è¡¨
  - `[æ–‡ä»¶å]_diamond_results.json` - è¯¦ç»†åˆ†æç»“æœ
  - `[æ–‡ä»¶å]_*_diamond.tsv` - å„é€šè·¯çš„è¯¦ç»†æ¯”å¯¹ç»“æœ

- **ç»¼åˆåˆ†ææŠ¥å‘Š**:
  - `[æ–‡ä»¶å]_integrated_summary.csv` - ç»¼åˆè¯„ä¼°ç»“æœ
  - `[æ–‡ä»¶å]_comprehensive_analysis.json` - å®Œæ•´åˆ†ææ•°æ®
  - `[æ–‡ä»¶å]_analysis_summary.txt` - æ–‡æœ¬æ ¼å¼æ‘˜è¦

#### 4.2 å¯é€‰åŠŸèƒ½è¾“å‡º

**Tomeåˆ†æç»“æœ**ï¼ˆå¦‚æœå®‰è£…äº†Tomeï¼‰:
- `[æ–‡ä»¶å]_tome/` - Tomeåˆ†æè¾“å‡ºç›®å½•
- æ¸©åº¦é¢„æµ‹ç›¸å…³æ–‡ä»¶

**CheckM2åˆ†æç»“æœ**ï¼ˆå¦‚æœå®‰è£…äº†CheckM2ï¼‰:
- `[æ–‡ä»¶å]_checkm2/` - CheckM2åˆ†æè¾“å‡ºç›®å½•
- `quality_report.tsv` - åŸºå› ç»„è´¨é‡æŠ¥å‘Š

### 5. å¸¸è§é—®é¢˜è§£å†³

#### 5.1 å®‰è£…ç›¸å…³é—®é¢˜

**å‘½ä»¤è¡Œå…¥å£ç‚¹é—®é¢˜**:
```bash
# å¦‚æœmetharctå‘½ä»¤ä¸å¯ç”¨ï¼Œä½†åŒ…å·²å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼
python -m metharct.cli.main --help

# é‡æ–°å®‰è£…é¡¹ç›®ï¼ˆä¿®å¤å‘½ä»¤è¡Œå…¥å£ç‚¹ï¼‰
pip uninstall metharct -y
pip install -e .

# æ£€æŸ¥ç¯å¢ƒæ˜¯å¦æ­£ç¡®æ¿€æ´»
conda activate metharct
```

**Diamondå·¥å…·ç¼ºå¤±**:
```bash
# ç¡®ä¿åœ¨æ­£ç¡®çš„condaç¯å¢ƒä¸­
conda activate metharct

# å®‰è£…Diamondï¼ˆæ ¸å¿ƒå¿…éœ€å·¥å…·ï¼‰
conda install -c bioconda diamond

# éªŒè¯å®‰è£…
diamond --help
```

#### 5.2 è¿è¡Œæ—¶é—®é¢˜

**æ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦**:
```bash
# é”™è¯¯æ–¹å¼
metharct diamond protein(1).faa -o results/

# æ­£ç¡®æ–¹å¼
metharct diamond "protein(1).faa" -o results/
```

**æƒé™é—®é¢˜ï¼ˆWindowsï¼‰**:
- ç¡®ä¿åœ¨æœ‰å†™å…¥æƒé™çš„ç›®å½•ä¸­è¿è¡Œ
- é¿å…åœ¨ç³»ç»Ÿç›®å½•ä¸­åˆ›å»ºè¾“å‡ºæ–‡ä»¶

#### 5.3 å¯é€‰å·¥å…·é—®é¢˜

**Tomeæˆ–CheckM2å®‰è£…å¤±è´¥**:
- è¿™äº›æ˜¯å¯é€‰å·¥å…·ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½
- å¯ä»¥ä½¿ç”¨ `--skip-tome` å’Œ `--skip-checkm2` å‚æ•°è·³è¿‡
- Windowsç”¨æˆ·å»ºè®®åœ¨WSLç¯å¢ƒä¸­å®‰è£…è¿™äº›å·¥å…·

**WSLé…ç½®ï¼ˆä»…é’ˆå¯¹å¯é€‰å·¥å…·ï¼‰**:
```bash
# å®‰è£…WSL2
wsl --install

# åœ¨WSLä¸­å®‰è£…condaå’Œå·¥å…·
wsl
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh
conda install -c bioconda tome checkm2
```

## å¿«é€Ÿå¼€å§‹æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šéªŒè¯å®‰è£…
```bash
# æ£€æŸ¥æ ¸å¿ƒå·¥å…·æ˜¯å¦å®‰è£…æˆåŠŸ
metharct --help

# å¦‚æœä¸Šè¿°å‘½ä»¤å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼ˆåŠŸèƒ½å®Œå…¨ç›¸åŒï¼‰
python -m metharct.cli.main --help

# æ£€æŸ¥Diamondå·¥å…·
diamond --help
```

### ç¬¬äºŒæ­¥ï¼šå‡†å¤‡æ•°æ®
- å‡†å¤‡FASTAæ ¼å¼çš„è›‹ç™½è´¨åºåˆ—æ–‡ä»¶
- ç¡®ä¿æ–‡ä»¶åä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œæˆ–ç”¨å¼•å·åŒ…å›´

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œåˆ†æ
```bash
# æ ¸å¿ƒåŠŸèƒ½åˆ†æ
metharct diamond "your_protein.faa" -o results/

# å¦‚æœmetharctå‘½ä»¤ä¸å¯ç”¨ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼ˆåŠŸèƒ½å®Œå…¨ç›¸åŒï¼‰ï¼ˆæ¨èï¼‰
python -m metharct.cli.main diamond "your_protein.faa" -o results/

# å®Œæ•´åˆ†æï¼ˆå¦‚æœå®‰è£…äº†å¯é€‰å·¥å…·ï¼‰
metharct comprehensive "your_protein.faa" -o results/
# æˆ–è€…
python -m metharct.cli.main comprehensive "your_protein.faa" -o results/
```

### ç¬¬å››æ­¥ï¼šæŸ¥çœ‹ç»“æœ
- æ‰“å¼€è¾“å‡ºç›®å½•ä¸­çš„ `*_integrated_summary.csv` æ–‡ä»¶
- æŸ¥çœ‹ `*_analysis_summary.txt` äº†è§£åˆ†ææ‘˜è¦

## å­¦ä¹ èµ„æº

- ğŸ“ **Pythonä½¿ç”¨ç¤ºä¾‹**: [example_usage.py](example_usage.py)
- ğŸ–¥ï¸ **WSLä½¿ç”¨ç¤ºä¾‹**: [example_wsl_usage.py](example_wsl_usage.py)
- ğŸ› **é—®é¢˜æŠ¥å‘Š**: GitHub Issues

## æ–°æ‰‹å»ºè®®

1. **ä»æ ¸å¿ƒåŠŸèƒ½å¼€å§‹**: å…ˆä½¿ç”¨Diamondåˆ†æï¼Œç†Ÿæ‚‰å·¥å…·æ“ä½œ
2. **ç†è§£è¾“å‡ºç»“æœ**: é‡ç‚¹å…³æ³¨ä»£è°¢å¤æ‚æ€§å’ŒåŸ¹å…»æ½œåŠ›è¯„ä¼°
3. **é€æ­¥æ‰©å±•**: åœ¨éœ€è¦æ—¶å†å®‰è£…å’Œä½¿ç”¨å¯é€‰å·¥å…·
4. **é‡åˆ°é—®é¢˜**: æŸ¥çœ‹å¸¸è§é—®é¢˜è§£å†³éƒ¨åˆ†ï¼Œæˆ–æäº¤GitHub Issue

## æ•°æ®åº“è¯´æ˜

MethArCTåŒ…å«ä»¥ä¸‹ä»£è°¢é€šè·¯æ•°æ®åº“ï¼š

### ç”²çƒ·ä»£è°¢é€šè·¯ï¼ˆ11ç§ï¼‰
- ç”²é…¸ç”²çƒ·ã€ä¹™é…¸ç”²çƒ·ã€ç”²é†‡ç”²çƒ·ç­‰å¤šç§äº§ç”²çƒ·é€”å¾„

### ç¡«ä»£è°¢é€šè·¯ï¼ˆ6ç§ï¼‰
- ç¡«é…¸ç›è¿˜åŸã€ç¡«æ°§åŒ–ã€ç¡«åŒ–æ°¢æ°§åŒ–ç­‰

### æ°®ä»£è°¢é€šè·¯ï¼ˆ4ç§ï¼‰
- ç¡åŒ–ã€åç¡åŒ–ã€æ°¨æ°§åŒ–ç­‰

### å…¶ä»–
- è€ç›æ€§ã€å¯åŸ¹å…»æ€§è¯„ä¼°ç›¸å…³åŸºå› 

## æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [TESTING.md](TESTING.md)
- ğŸ“ **ä½¿ç”¨ç¤ºä¾‹**: [example_usage.py](example_usage.py)
- ğŸ–¥ï¸ **WSLé…ç½®**: [example_wsl_usage.py](example_wsl_usage.py)
- ğŸ› **é—®é¢˜æŠ¥å‘Š**: GitHub Issues

### å¸¸è§é—®é¢˜
1. **å®‰è£…é—®é¢˜**: æŸ¥çœ‹ä¸Šæ–¹"å¸¸è§é—®é¢˜è§£å†³"éƒ¨åˆ†
2. **ä½¿ç”¨é—®é¢˜**: å‚è€ƒ"å¿«é€Ÿå¼€å§‹æŒ‡å—"
3. **ç»“æœè§£è¯»**: æŸ¥çœ‹"è¾“å‡ºç»“æœè¯´æ˜"

## é¡¹ç›®ä¿¡æ¯

### è®¸å¯è¯
GPL-3.0 License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

### ç‰ˆæœ¬ä¿¡æ¯
- **å½“å‰ç‰ˆæœ¬**: 1.0.0
- **Pythonè¦æ±‚**: 3.8+
- **æ ¸å¿ƒä¾èµ–**: Diamond

### å¼•ç”¨
å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†MethArCTï¼Œè¯·å¼•ç”¨ï¼š
```
[è®ºæ–‡ä¿¡æ¯å¾…å‘å¸ƒ]
```

### è”ç³»æ–¹å¼
- **GitHub Issues**: æŠ¥å‘Šé—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚
- **é¡¹ç›®ä¸»é¡µ**: [[GitHub Repository](https://github.com/rsj99-dev/MethArCT)]

---

**æ„Ÿè°¢ä½¿ç”¨MethArCTï¼** ğŸ§¬

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªå·¥å…·æœ‰ç”¨ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªâ­ï¸ï¼
